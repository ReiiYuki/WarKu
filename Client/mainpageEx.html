<!DOCTYE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="socket.io-client/socket.io.js"></script>
    <script src="jquery-2.2.3.min.js"></script>
    <script type="text/javascript" src="bootstrap-3.3.6-dist/js/bootstrap.js"></script>
    <script type="text/javascript" src="jquery-ui-1.11.4/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="bootstrap-3.3.6-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="jquery-ui-1.11.4/jquery-ui.min.css">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="clay.css">
    <link rel="stylesheet" href="iron.css">
    <link rel="stylesheet" href="tree.css">
    <link rel="stylesheet" href="crop.css">
    <link rel="stylesheet" href="circlelevel.css">
    <link rel="stylesheet" href="resource.css">
    <link rel="stylesheet" href="map.css">
    <link rel="stylesheet" href="mail.css">
    <link rel="stylesheet" href="village.css">
    <title>WarKu!</title>
</head>

<body>


    <!--Navbar menu-->
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">WarKu!</a>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="main-nav">

                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#" id="account-btn">Account</a></li>
                    <li><a href="#" id="setting-btn">Setting</a></li>
                    <li><a href="#" id="logout-btn">Logout</a></li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <!--Account Modal-->
    <div class="modal fade col2" id="button-account" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title">Account</h3>
                </div>
                <div class="modal-body">

                </div>
            </div>
        </div>
    </div>

    <!--Setting Modal-->
    <div class="modal fade" id="button-setting" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title">Setting</h3>
                </div>
                <div class="modal-body">

                </div>
            </div>
        </div>
    </div>


    <!--menu-->
    <div class="menu-frame">
        <nav>
            <ul class="row-centered">
                <!--menu resource-->
                <li class="menu-li">
                    <div class="menu" id="resource_menu">
                        <a href="#">
                            <img class="menu_img" src="picture/resource.png">
                        </a>
                    </div>
                </li>
                <!--menu village-->
                <li class="menu-li">
                    <div class="menu" id="village_menu">
                        <a href="#">
                            <img class="menu_img" src="picture/village.png">
                        </a>
                    </div>
                </li>
                <!--menu map-->
                <li class="menu-li">
                    <div class="menu" id="map_menu">
                        <a href="#">
                            <img class="menu_img" src="picture/map.png">
                        </a>
                    </div>
                </li>
                <!--menu report-->
                <li class="menu-li">
                    <div class="menu" id="report_menu">
                        <a href="#">
                            <img class="menu_img" src="picture/report.png">
                        </a>
                    </div>
                </li>
                <!--menu mail-->
                <li class="menu-li">
                    <div class="menu" id="mail_menu">
                        <a href="#">
                            <img class="menu_img" src="picture/mail.png">
                        </a>
                    </div>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Stockbar -->
    <div class="row">
        <div class="container stockbarcontainer">
            <div class="jumbotron stockbar">
                <div class="row">
                    <div class="col-md-1 col-sm-1 col-xs-1"><img class=stockwarehouse>&nbsp;&nbsp;<span id="warehousenum" class="stocktext">0</span></div>
                    <div class="col-md-2 col-sm-2 col-xs-2"><img class=stockwood>&nbsp;&nbsp;<span id="woodnum" class="stocktext">0</span></div>
                    <div class="col-md-2 col-sm-2 col-xs-2"><img class=stockclay>&nbsp;&nbsp;<span id="claynum" class="stocktext">0</span></div>
                    <div class="col-md-2 col-sm-2 col-xs-2"><img class=stockiron>&nbsp;&nbsp;<span id="ironnum" class="stocktext">0</span></div>
                    <div class="col-md-1 col-sm-1 col-xs-1"><img class=stockgranary>&nbsp;&nbsp;<span id="granarynum" class="stocktext">0</span></div>
                    <div class="col-md-2 col-sm-2 col-xs-2"><img class=stockcrop>&nbsp;&nbsp;<span id="cropnum" class="stocktext">0</span></div>
                    <div class="col-md-2 col-sm-2 col-xs-2"><img class=stockworker>&nbsp;&nbsp;<span id="workernum" class="stocktext">0</span></div>
                </div>
            </div>
        </div>
    </div>

    <!--resource container-->
    <div class="container" id="resource_container">
        <span class="Centerer"></span>
        <div class="resoucre">


            <image src="picture/resource-structure-test.png"></image>

            <!--resource 1-16-->

            <div class="resource-box1">
                <image id="resource1"></image>
            </div>
            <div class="resource-box2">
                <image id="resource2"></image>
            </div>
            <div class="resource-box8">
                <image id="resource8"></image>
            </div>
            <div class="resource-box9">
                <image id="resource9"></image>
            </div>
            <div class="resource-box16">
                <image id="resource16"></image>
            </div>
            <div class="resource-box10">
                <image id="resource10"></image>
            </div>
            <div class="resource-box15">
                <image id="resource15"></image>
            </div>
            <div class="resource-box14">
                <image id="resource14"></image>
            </div>
            <div class="resource-box11">
                <image id="resource11"></image>
            </div>
            <div class="resource-box12">
                <image id="resource12"></image>
            </div>
            <div class="resource-box13">
                <image id="resource13"></image>
            </div>
            <div class="resource-box3">
                <image id="resource3"></image>
            </div>
            <div class="resource-box7">
                <image id="resource7"></image>
            </div>
            <div class="resource-box6">
                <image id="resource6"></image>
            </div>
            <div class="resource-box5">
                <image id="resource5"></image>
            </div>
            <div class="resource-box4">
                <image id="resource4"></image>
            </div>

            <div>
                <image id="resource1-label" index="0" class="resource-level"></image>
                <image id="resource2-label" index="1" class="resource-level"></image>
                <image id="resource8-label" index="7" class="resource-level"></image>
                <image id="resource9-label" index="8" class="resource-level"></image>
                <image id="resource16-label" index="15" class="resource-level"></image>
                <image id="resource10-label" index="9" class="resource-level"></image>
                <image id="resource15-label" index="14" class="resource-level"></image>
                <image id="resource14-label" index="13" class="resource-level"></image>
                <image id="resource11-label" index="10" class="resource-level"></image>
                <image id="resource12-label" index="11" class="resource-level"></image>
                <image id="resource13-label" index="12" class="resource-level"></image>
                <image id="resource3-label" index="2" class="resource-level"></image>
                <image id="resource7-label" index="6" class="resource-level"></image>
                <image id="resource6-label" index="5" class="resource-level"></image>
                <image id="resource5-label" index="4" class="resource-level"></image>
                <image id="resource4-label" index="3" class="resource-level"></image>
            </div>

        </div>


        <!-- Resource produce rate -->
        <div class="container-fluid">
            <div class="jumbotron" id="produce_container">
                <div class="toTop jumbotronwidth">
                    <div class="row row-centered titlerow">Rate of production per hour</div>
                    <div class="row paddingrow"><img class=woodproduce>&nbsp;<span id="wood_produce_rate"></span></div>
                    <div class="row paddingrow"><img class=clayproduce>&nbsp;<span id="clay_produce_rate"></span></div>
                    <div class="row paddingrow"><img class=ironproduce>&nbsp;<span id="iron_produce_rate"></span></div>
                    <div class="row paddingrow"><img class=cropproduce>&nbsp;<span id="crop_produce_rate"></span></div>
                </div>
            </div>
        </div>

    </div>
    <!-- Upgrade resource Modal -->
    <div class="modal fade" id="upgrade-resourceModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="modalupgrade-header-title"></h4>
                </div>
                <div class="modal-body">
                    Rate of production : <span id="productIn-time"></span> hr</p>
                    <!--                        <span id="rateProduction"Rate of production LV </span>-->
                    <span id="productNext-level"></span> :
                    <span id="productNext-time"></span> hr</p>
                    Requirment</p>
                    Wood : <span id="setWood"></span> Clay : <span id="setClay"></span> Iron : <span id="setIron"></span> Crop : <span id="setCrop"></span></p>
                    Upgrade time : <span id="upgrade-time"></span>
                    <button id="buttonUpgrade" type="button" class="btn btn-default" data-dismiss="modal" value="">Upgrade</button>
                </div>


            </div>
        </div>
    </div>


    <!--village container-->
    <div class="container" id="village_container">
        <span class="Centerer"></span>
        <div class="village">
            <image src="picture/building-structure.jpg"></image>

            <!-- village pic -->
            <div class="village1-box">
                <image id="village1">
            </div>
            <div class="village2-box">
                <image id="village2">
            </div>
            <div class="village3-box">
                <image id="village3">
            </div>
            <div class="village4-box">
                <image id="village4">
            </div>
            <div class="village5-box">
                <image id="village5">
            </div>
            <div class="village6-box">
                <image id="village6">
            </div>
            <div class="village7-box">
                <image id="village7">
            </div>
            <div class="village8-box">
                <image id="village8">
            </div>
            <div class="village9-box">
                <image id="village9">
            </div>
            <div class="village10-box">
                <image id="village10">
            </div>
            <div class="village11-box">
                <image id="village11">
            </div>
            <div class="village12-box">
                <image id="village12">
            </div>
            <div class="village13-box">
                <image id="village13">
            </div>
            <div class="village14-box">
                <image id="village14">
            </div>

            <!-- village level pic -->
            <image id="village1-label" index="0" class="village-level"></image>
            <image id="village2-label" index="1" class="village-level"></image>
            <image id="village3-label" index="2" class="village-level"></image>
            <image id="village4-label" index="3" class="village-level"></image>
            <image id="village5-label" index="4" class="village-level"></image>
            <image id="village6-label" index="5" class="village-level"></image>
            <image id="village7-label" index="6" class="village-level"></image>
            <image id="village8-label" index="7" class="village-level"></image>
            <image id="village9-label" index="8" class="village-level"></image>
            <image id="village10-label" index="9" class="village-level"></image>
            <image id="village11-label" index="10" class="village-level"></image>
            <image id="village12-label" index="11" class="village-level"></image>
            <image id="village13-label" index="12" class="village-level"></image>
            <image id="village14-label" index="13" class="village-level"></image>

        </div>
    </div>

    <!--Create new Construction Modal -->
    <div class="modal fade" id="create-villageModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title" id="modalvillage-header-title">New building</h3>
                </div>
                <div class="modal-body">
                    <h4>Villagehall</h4></p>
                    Building leaders live in the main building. The much higher level The new building will be completed faster.</p>
                    <div class="villagehall-model"></div>
                    Requirment</p>
                    Wood : 70 Clay : 40 Iron : 60 Crop : 20</p>
                    Contructing time : 00:06:40
                    <button id="villagehall-create" type="button" class="btn btn-default buildingcreate" data-dismiss="modal" value="villagehall">Create</button>
                </div>
                <div class="modal-body">
                    <h4>Granary</h4></p>
                    Crop produced on your farm are kept here . The barn , which has more than three times as many resources to help you keep safe.</p>
                    <div class="granary-model"></div>
                    Requirment</p>
                    Wood : 80 Clay : 100 Iron : 70 Crop : 20</p>
                    Contructing time : 00:05:20
                    <button id="granary-create" type="button" class="btn btn-default buildingcreate" data-dismiss="modal" value="granary">Create</button>
                </div>
                <div class="modal-body">
                    <h4>Warehouse</h4></p>
                    Resources wood, clay and iron are stored in this warehouse . Warehouse , which has more than three times as many resources to help you keep safe .</p>
                    <div class="warehouse-model"></div>
                    Requirment</p>
                    Wood : 130 Clay : 160 Iron : 90 Crop : 40</p>
                    warehouse level 1 , granary level 1</p>
                    Contructing time : 00:06:40
                    <button id="warehouse-create" type="button" class="btn btn-default buildingcreate" data-dismiss="modal" value="warehouse">Create</button>
                </div>
                <div class="modal-body">
                    <h4>Market</h4></p>
                    The markets you can trade resources with other players have . Even higher You can transport more resources simultaneously .</p>
                    <div class="market-model"></div>
                    Requirment</p>
                    Wood : 80 Clay : 70 Iron : 120 Crop : 70</p>
                    Contructing time : 00:06:00
                    <button id="market-create" type="button" class="btn btn-default buildingcreate" data-dismiss="modal" value="market">Create</button>
                </div>
                <div class="modal-body">
                    <h4>Barracks</h4></p>
                    A large military barracks allows you to build more troops at the same time . But resources are three times normal .</p>
                    <div class="barracks-model"></div>
                    Requirment</p>
                    Wood : 210 Clay : 140 Iron : 260 Crop : 120</p>
                    Contructing time : 00:06:40
                    <button id="barracks-create" type="button" class="btn btn-default buildingcreate" data-dismiss="modal" value="barracks">Create</button>
                </div>
                <div class="modal-body">
                    <h4>Academy</h4></p>
                    Education New Forces types being researched at this school. Add school level to study the forces that are even more effective . After research, the military unit that you want done . You can train soldiers in this village.</p>
                    <div class="academy-model"></div>
                    Requirment</p>
                    Wood : 220 Clay : 160 Iron : 90 Crop : 40</p>
                    Contructing time : 00:06:40
                    <button id="academy-create" type="button" class="btn btn-default buildingcreate" data-dismiss="modal" value="academy">Create</button>
                </div>
                <div class="modal-body">
                    <h4>Stable</h4></p>
                    The great horse stables allows you to build large military units simultaneously . The cost is three times the normal price.</p>
                    <div class="stable-model"></div>
                    Requirment</p>
                    Wood : 260 Clay : 140 Iron : 220 Crop : 100</p>
                    Contructing time : 00:07:20
                    <button id="stable-create" type="button" class="btn btn-default buildingcreate" data-dismiss="modal" value="stable">Create</button>
                </div>
                <div class="modal-body">
                    <h4>Headquarter</h4></p>
                    The mansion you can train a hero and occupied the area around the oasis when you raise the level to 10 level will affect the rate of production resources raised .</p>
                    <div class="headquarter-model"></div>
                    Requirment</p>
                    Wood : 700 Clay : 670 Iron : 700 Crop : 240</p>
                    Contructing time : 00:07:40
                    <button id="headquarter-create" type="button" class="btn btn-default buildingcreate" data-dismiss="modal" value="headquarter">Create</button>
                </div>
                <div class="modal-body">
                    <h4>Smithy</h4></p>
                    Forge weapons and armor of warriors, were developed in the furnace of the forge . You can invent better weapons and armor by increasing the level of the smithy.</p>
                    <div class="smithy-model"></div>
                    Requirment</p>
                    Wood : 180 Clay : 250 Iron : 500 Crop : 160</p>
                    Contructing time : 00:06:40
                    <button id="smithy-create" type="button" class="btn btn-default buildingcreate" data-dismiss="modal" value="smithy">Create</button>
                </div>
                <div class="modal-body">
                    <h4>Workshop</h4></p>
                    Workshop Siege engines like catapults and rams can be built in the workshop. The higher level of engine It will only produce faster .</p>
                    <div class="workshop-model"></div>
                    Requirment</p>
                    Wood : 460 Clay : 510 Iron : 600 Crop : 320</p>
                    Contructing time : 00:10:00
                    <button id="workshop-create" type="button" class="btn btn-default buildingcreate" data-dismiss="modal" value="workshop">Create</button>
                </div>
            </div>
        </div>
    </div>

    <!--Upgrade Village -->
    <div class="modal fade" id="upgrade-village" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title"><span id="level-village"></span></h3>
                </div>
                <div class="modal-body">
                    </p>
                    <div class="village-upgrademodel"></div>
                    </p>
                    <span id="setWood-village"></span><span id="setClay-village"></span><span id="setIron-village"></span><span id="setCrop-village"></span></p>
                    <span id="upgrade-time-village"></span>
                    <button id="upgradebtn-village" type="button" class="btn btn-default" data-dismiss="modal" value=""></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal fade" id="errorModel" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="modal-header-title"></h4>
                </div>
                <div class="modal-body" id="modal-body">
                    <p></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <!--map container-->
    <div class="container" id="map_container">
        <span class="map-center"></span>

        <div class="map">
            <!-- map 8*8 -->
            <image src="picture/map-test.png"></image>
            <div id="map-posY1" class="posY1"><center>1</center></div>
            <div id="map-posY2" class="posY2">2</div>
            <div id="map-posY3" class="posY3">3</div>
            <div id="map-posY4" class="posY4">4</div>
            <div id="map-posY5" class="posY5">5</div>
            <div id="map-posY6" class="posY6">6</div>
            <div id="map-posY7" class="posY7">7</div>
            <div id="map-posY8" class="posY8">8</div>
            <div id="map-posY9" class="posY9">9</div>
            <div id="map-posX1" class="posX1">1</div>
            <div id="map-posX2" class="posX2">2</div>
            <div id="map-posX3" class="posX3">3</div>
            <div id="map-posX4" class="posX4">4</div>
            <div id="map-posX5" class="posX5">5</div>
            <div id="map-posX6" class="posX6">6</div>
            <div id="map-posX7" class="posX7">7</div>
            <div id="map-posX8" class="posX8">8</div>
            <div id="map-posX1" class="posX9">9</div>
            <div id="map-free" class="free"></div>
            <div id="map-box0" class="box0">0</div>
            <div id="map-box1" class="box1">1</div>
            <div id="map-box2" class="box2">2</div>
            <div id="map-box3" class="box3">3</div>
            <div id="map-box4" class="box4">4</div>
            <div id="map-box5" class="box5">5</div>
            <div id="map-box6" class="box6">6</div>
            <div id="map-box7" class="box7">7</div>
            <div id="map-box8" class="box8">8</div>
            <div id="map-box9" class="box9">9</div>
            <div id="map-box10" class="box10">10</div>
            <div id="map-box11" class="box11">11</div>
            <div id="map-box12" class="box12">12</div>
            <div id="map-box13" class="box13">13</div>
            <div id="map-box14" class="box14">14</div>
            <div id="map-box15" class="box15">15</div>
            <div id="map-box16" class="box16">16</div>
            <div id="map-box17" class="box17">17</div>
            <div id="map-box18" class="box18">18</div>
            <div id="map-box19" class="box19">19</div>
            <div id="map-box20" class="box20">20</div>
            <div id="map-box21" class="box21">21</div>
            <div id="map-box22" class="box22">22</div>
            <div id="map-box23" class="box23">23</div>
            <div id="map-box24" class="box24">24</div>
            <div id="map-box25" class="box25">25</div>
            <div id="map-box26" class="box26">26</div>
            <div id="map-box27" class="box27">27</div>
            <div id="map-box28" class="box28">28</div>
            <div id="map-box29" class="box29">29</div>
            <div id="map-box30" class="box30">30</div>
            <div id="map-box31" class="box31">31</div>
            <div id="map-box32" class="box32">32</div>
            <div id="map-box33" class="box33">33</div>
            <div id="map-box34" class="box34">34</div>
            <div id="map-box35" class="box35">35</div>
            <div id="map-box36" class="box36">36</div>
            <div id="map-box37" class="box37">37</div>
            <div id="map-box38" class="box38">38</div>
            <div id="map-box39" class="box39">39</div>
            <div id="map-box40" class="box40">40</div>
            <div id="map-box41" class="box41">41</div>
            <div id="map-box42" class="box42">42</div>
            <div id="map-box43" class="box43">43</div>
            <div id="map-box44" class="box44">44</div>
            <div id="map-box45" class="box45">45</div>
            <div id="map-box46" class="box46">46</div>
            <div id="map-box47" class="box47">47</div>
            <div id="map-box48" class="box48">48</div>
            <div id="map-box49" class="box49">49</div>
            <div id="map-box50" class="box50">50</div>
            <div id="map-box51" class="box51">51</div>
            <div id="map-box52" class="box52">52</div>
            <div id="map-box53" class="box53">53</div>
            <div id="map-box54" class="box54">54</div>
            <div id="map-box55" class="box55">55</div>
            <div id="map-box56" class="box56">56</div>
            <div id="map-box57" class="box57">57</div>
            <div id="map-box58" class="box58">58</div>
            <div id="map-box59" class="box59">59</div>
            <div id="map-box60" class="box60">60</div>
            <div id="map-box61" class="box61">61</div>
            <div id="map-box62" class="box62">62</div>
            <div id="map-box63" class="box63">63</div>
            <div id="map-box64" class="box64">64</div>
            <div id="map-box65" class="box65">65</div>
            <div id="map-box66" class="box66">66</div>
            <div id="map-box67" class="box67">67</div>
            <div id="map-box68" class="box68">68</div>
            <div id="map-box69" class="box69">69</div>
            <div id="map-box70" class="box70">70</div>
            <div id="map-box71" class="box71">71</div>
            <div id="map-box72" class="box72">72</div>
            <div id="map-box73" class="box73">73</div>
            <div id="map-box74" class="box74">74</div>
            <div id="map-box75" class="box75">75</div>
            <div id="map-box76" class="box76">76</div>
            <div id="map-box77" class="box77">77</div>
            <div id="map-box78" class="box78">78</div>
            <div id="map-box79" class="box79">79</div>
            <div id="map-box80" class="box80">80</div>
            <div id="map-arrow1" class="arrow1"></div>
            <div id="map-arrow2" class="arrow2"></div>
            <div id="map-arrow3" class="arrow3"></div>
            <div id="map-arrow4" class="arrow4"></div>
        </div>

        <!-- coordinates -->

        <div class="cordinates">
            <div class="row padtop"></div>
            <div class="row">
                <div class="col-md-8 col-sm-8 col-xs-8"></div>
                <div class="col-md-4 col-sm-4 col-xs-4 col-cordinates">
                    <div class="cordinate-text">x</div>
                    <input type="text" class="form-control" id="x-cordinate">
                    <div class="cordinate-text">y</div>
                    <input type="text" class="form-control" id="y-cordinate">
                    <div class="cordinate-btn"></div>
                    <button class="btn btn-primary" type="button">GO</button>
                </div>
            </div>
        </div>

    </div>

    <!--report container-->
    <div class="container" id="report_container">
        <span class="Centerer"></span>
        <div class="village">
            <image src="picture/report.png"></image>
        </div>
        <div class="resource1">
            <image id="resource_pos1"></image>
        </div>
    </div>

    <!--mail container-->
    <div class="container" id="mail_container">
        <span class="Centerer"></span>
        <div class="jumbotron">
            <ul id="myTab" class="nav nav-tabs">
                <li class="active"><a href="#inbox" data-toggle="tab">Inbox</a></li>
                <li class=""><a href="#compose" data-toggle="tab">Compose</a></li>
                <li class=""><a href="#sendbox" data-toggle="tab">Sendbox</a></li>
            </ul>
            <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade active in" id="inbox">
                    <div class="jumbotron inbox-container">
                        inbox
                    </div>
                </div>
                <div class="tab-pane fade" id="compose">
                    profile tab!
                </div>
                <div class="tab-pane fade" id="sendbox">
                    profile tab!
                </div>
            </div>
        </div>
        <div class="resource1">
            <image id="resource_pos1"></image>
        </div>
    </div>


    <!-- Initialize -->
    <script type="text/javascript">
        /*global attribute*/
        var task;
        var tasktime, taskindex;
        /* resource attribute*/
        var resource = null;
        var resourceAllTypes = ["wood","clay","iron","crop"];
        var resource_info = {
            "crop": {
                cost: [[70, 90, 70, 20], [115, 150, 115, 35], [195, 250, 195, 55], [325, 420, 325, 95], [545, 700, 545, 155], [910, 1170, 910, 260], [1520, 1950, 1520, 435], [2535, 3260, 2535, 725], [4235, 5445, 4235, 1210], [7070, 9095, 7070, 2020]]
                , consumption: [0, 0, 0, 0, 0, 1, 1, 1, 1, 1]
                , produce: [15, 25, 45, 75, 125, 155, 255, 355, 505, 725, 1500]
                , time: [{
                    hour: 0
                    , min: 0
                    , sec: 30
                }, {
                    hour: 0
                    , min: 1
                    , sec: 15
                }, {
                    hour: 0
                    , min: 3
                    , sec: 0
                }, {
                    hour: 0
                    , min: 5
                    , sec: 30
                }, {
                    hour: 0
                    , min: 9
                    , sec: 20
                }, {
                    hour: 0
                    , min: 15
                    , sec: 30
                }, {
                    hour: 0
                    , min: 25
                    , sec: 50
                }, {
                    hour: 0
                    , min: 36
                    , sec: 30
                }, {
                    hour: 1
                    , min: 8
                    , sec: 15
                }, {
                    hour: 1
                    , min: 45
                    , sec: 30
                }]
            }
            , "iron": {
                cost: [[100, 80, 30, 60], [165, 135, 50, 100], [280, 225, 85, 165], [465, 375, 140, 280], [780, 620, 235, 465], [1300, 1040, 390, 780], [2170, 1735, 650, 1300], [3625, 2900, 1085, 2175], [6050, 4840, 1815, 3630], [10105, 8080, 3030, 6060]]
                , consumption: [3, 2, 2, 2, 2, 2, 2, 2, 2, 2]
                , produce: [15, 25, 45, 75, 125, 155, 255, 355, 505, 725, 1500]
                , time: [{
                    hour: 0
                    , min: 1
                    , sec: 5
                }, {
                    hour: 0
                    , min: 3
                    , sec: 0
                }, {
                    hour: 0
                    , min: 5
                    , sec: 30
                }, {
                    hour: 0
                    , min: 9
                    , sec: 35
                }, {
                    hour: 0
                    , min: 16
                    , sec: 0
                }, {
                    hour: 0
                    , min: 26
                    , sec: 30
                }, {
                    hour: 0
                    , min: 42
                    , sec: 35
                }, {
                    hour: 1
                    , min: 8
                    , sec: 0
                }, {
                    hour: 1
                    , min: 49
                    , sec: 5
                }, {
                    hour: 2
                    , min: 58
                    , sec: 30
                }]
            }
            , "clay": {
                cost: [[80, 40, 80, 50], [135, 65, 135, 85], [225, 110, 225, 140], [375, 185, 375, 235], [620, 310, 620, 390], [1040, 520, 1040, 650], [1735, 870, 1735, 1085], [2900, 1450, 2900, 1810], [4840, 2420, 4840, 3025], [8080, 4040, 8080, 5050]]
                , consumption: [2, 1, 1, 1, 1, 5, 5, 5, 5, 5]
                , produce: [15, 25, 45, 75, 125, 155, 255, 355, 505, 725, 1500]
                , time: [{
                    hour: 0
                    , min: 0
                    , sec: 40
                }, {
                    hour: 0
                    , min: 1
                    , sec: 50
                }, {
                    hour: 0
                    , min: 3
                    , sec: 30
                }, {
                    hour: 0
                    , min: 6
                    , sec: 20
                }, {
                    hour: 0
                    , min: 10
                    , sec: 50
                }, {
                    hour: 0
                    , min: 18
                    , sec: 10
                }, {
                    hour: 0
                    , min: 29
                    , sec: 50
                }, {
                    hour: 0
                    , min: 48
                    , sec: 20
                }, {
                    hour: 1
                    , min: 18
                    , sec: 10
                }, {
                    hour: 2
                    , min: 5
                    , sec: 30
                }]
            }
            , "wood": {
                cost: [[40, 100, 50, 60], [65, 165, 85, 100], [110, 280, 140, 165], [185, 465, 235, 280], [310, 780, 390, 465], [520, 1300, 650, 780], [870, 2170, 1085, 1300], [1450, 3625, 1810, 2175], [2420, 6050, 3025, 3630], [4040, 10105, 5050, 6060]]
                , consumption: [2, 1, 1, 1, 1, 2, 2, 2, 2, 2]
                , produce: [15, 25, 45, 75, 125, 155, 255, 355, 505, 725, 1500]
                , time: [{
                    hour: 0
                    , min: 0
                    , sec: 50
                }, {
                    hour: 0
                    , min: 2
                    , sec: 0
                }, {
                    hour: 0
                    , min: 3
                    , sec: 50
                }, {
                    hour: 0
                    , min: 7
                    , sec: 0
                }, {
                    hour: 0
                    , min: 11
                    , sec: 50
                }, {
                    hour: 0
                    , min: 18
                    , sec: 50
                }, {
                    hour: 0
                    , min: 32
                    , sec: 0
                }, {
                    hour: 1
                    , min: 51
                    , sec: 50
                }, {
                    hour: 1
                    , min: 23
                    , sec: 50
                }, {
                    hour: 2
                    , min: 14
                    , sec: 50
                }]
            }
        };
        var resource_value = null;
        var resource_produce_rate = [0, 0, 0, 0];
        var resource_capacity = new Array;
        var status_resource;
        var index_resource;
        var resourceUpgradeCall = false;
        var worker, fullworker;
        var map = new Array;

        /* initial function */
        function init() {
            $('#resource_container').hide();
            $('#village_container').hide();
            $('#map_container').hide();
            $('#report_container').hide();
            $('#mail_container').hide();
            $('#statistic_container').hide();
            setResourceValue();
            checkTask();
        }

        /*Resource function*/
        function resourceClick() {
            init();
            $('#resource_container').show();
            setResource();
        }
        
        function setResource(){
            console.log('Resource');
            $.post("http://localhost:5555/loadresource", {}, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    resource = JSON.parse(data);
                    console.log(resource);
                }
            })
            setTimeout(generateResource, 500);
            setTimeout(generateWorker, 200);
        }
        
        function generateWorker() {
            setVillage();
            setTimeout(generateWorkerDelay, 200);

        }

        function generateWorkerDelay() {
            fullworker = 1;
            var villagehalls = new Array;
            for (var i = 0; i < building.length; i++) {
                if (building[i]["type"] == 'villagehall') {
                    villagehalls.push(building[i]);
                }
            }
            for (var i = 0; i < villagehalls.length; i++) {
                fullworker += villagehalls[i]["level"];
            }
            //            $('#workernum').text(worker);
        }

        function setResourceValue() {
            console.log('update');
            $.post("http://localhost:5555/getResource", {}, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    resource_value = JSON.parse(data);
                    console.log(JSON.stringify(resource_value));
                }
            })
            setCapacity();
        }

        function setCapacity() {
            $.post("http://localhost:5555/getCapacity", function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    data = JSON.parse(data);
                    console.log(JSON.stringify(data));
                    resource_capacity[0] = data.granary;
                    resource_capacity[1] = data.warehouse;
                }
            })
        }

        function setProduceRate() {
            resource_produce_rate = [0, 0, 0, 0];
            for (var i = 0; i < 16; i++) {
                if (resource[i]["type"] == "wood") resource_produce_rate[0] += (resource_info["wood"].produce[resource[i]["level"]]);
                else if (resource[i]["type"] == "clay") resource_produce_rate[1] += (resource_info["clay"].produce[resource[i]["level"]]);
                else if (resource[i]["type"] == "iron") resource_produce_rate[2] += (resource_info["iron"].produce[resource[i]["level"]]);
                else resource_produce_rate[3] += (resource_info["crop"].produce[resource[i]["level"]]);
            }
            $('#wood_produce_rate').text(resource_produce_rate[0]);
            $('#clay_produce_rate').text(resource_produce_rate[1]);
            $('#iron_produce_rate').text(resource_produce_rate[2]);
            $('#crop_produce_rate').text(resource_produce_rate[3]);
        }


        function generateResource() {
            setResourceValue();
            for (var i = 0; i < 16; i++) {
                document.getElementById("resource" + (i + 1)).className = resource[i]["type"] + (i + 1);
                document.getElementById("resource" + (i + 1) + "-label").className = "level" + (resource[i]["level"]);
                $("#resource" + (i + 1) + "-label").prop('title', resource[i]["type"]);
            }
        }

        function upgradeResource(e) {
            index_resource = parseInt($(this).attr("index"));
            console.log("index" + index_resource);
            var upgradeTime = "";
            console.log(index_resource + "");

            $('#upgrade-resourceModal').modal("show");
            $('#modalupgrade-header-title').text(resource[index_resource]["type"] + " level " + resource[index_resource]["level"]);
            $('#productIn-time').text(resource_info[resource[index_resource]["type"]].produce[resource[index_resource]["level"]]);
            if (resource[index_resource]["level"] < 10) {
                $('#productNext-level').text("Rate of production LV " + (resource[index_resource]["level"] + 1));
                $('#productNext-time').text(resource_info[resource[index_resource]["type"]].produce[resource[index_resource]["level"] + 1]);
            }
            $('#setWood').text(resource_info[resource[index_resource]["type"]].cost[resource[index_resource]["level"]][0]);
            $('#setClay').text(resource_info[resource[index_resource]["type"]].cost[resource[index_resource]["level"]][1]);
            $('#setIron').text(resource_info[resource[index_resource]["type"]].cost[resource[index_resource]["level"]][2]);
            $('#setCrop').text(resource_info[resource[index_resource]["type"]].cost[resource[index_resource]["level"]][3]);
            upgradeTime = twoDigits(resource_info[resource[index_resource]["type"]].time[resource[index_resource]["level"]].hour) + ":" + twoDigits(resource_info[resource[index_resource]["type"]].time[resource[index_resource]["level"]].min) + ":" + twoDigits(resource_info[resource[index_resource]["type"]].time[resource[index_resource]["level"]].sec);
            $('#upgrade-time').text(upgradeTime);

            $.post("http://localhost:5555/canUpgradeResource", {
                pos: (index_resource + 1)
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    status_resource = data;
                }
            })
            setTimeout(upgradeResourceDelay, 100);

        }

        function upgradeResourceDelay() {
            console.log(status_resource);
            if (status_resource == 'true') {
                console.log('can upgrade');
                $('#buttonUpgrade').prop("disabled", false);
                resourceUpgradeCall = true;
                $('#buttonUpgrade').click(upgradeResourceLevel);
            } else {
                console.log('can not upgrade');
                $('#buttonUpgrade').prop("disabled", true);
            }
        }


        /* Upgrade resource to database */
        function upgradeResourceLevel(e) {
            if (resourceUpgradeCall) {
                console.log('upgrade Resource law na kub' + (index_resource + 1))
                $.post("http://localhost:5555/upgradeResource", {
                    pos: (index_resource + 1)
                }, function (data) {
                    if (data == "Something wrong on our server :( Try Again~") {
                        $("#modal-header-title").text('Error !');
                        //Update and Show modal if error is occur
                        $("#modal-body").text(data);
                        $("#errorModel").modal("show");
                    }
                })
                resourceUpgradeCall = false;
                setTimeout(setResourceValue, 100);
                setTimeout(checkTask,100);
            }

        }

        function updateResource() {
            for (var i = 0; i < 16; i++) {
                if (resource[i]["type"] == "wood") {
                    resource_value.wood += (resource_info["wood"].produce[resource[i]["level"]]) / 36000;
                    if (resource_value.wood >= resource_capacity[1]) resource_value.wood = resource_capacity[1];
                } else if (resource[i]["type"] == "clay") {
                    resource_value.clay += (resource_info["clay"].produce[resource[i]["level"]]) / 36000;
                    if (resource_value.clay >= resource_capacity[1]) resource_value.clay = resource_capacity[1];
                } else if (resource[i]["type"] == "iron") {
                    resource_value.iron += (resource_info["iron"].produce[resource[i]["level"]]) / 36000;
                    if (resource_value.iron >= resource_capacity[1]) resource_value.iron = resource_capacity[1];
                } else if (resource[i]["type"] == "crop") {
                    resource_value.crop += (resource_info["crop"].produce[resource[i]["level"]]) / 36000;
                    if (resource_value.crop >= resource_capacity[0]) resource_value.crop = resource_capacity[0];
                }
            }
            $('#woodnum').text(parseInt(resource_value.wood));
            $('#claynum').text(parseInt(resource_value.clay));
            $('#ironnum').text(parseInt(resource_value.iron));
            $('#cropnum').text(parseInt(resource_value.crop));
            $('#warehousenum').text(parseInt(resource_capacity[1]));
            $('#granarynum').text(parseInt(resource_capacity[0]));
            setProduceRate();
            //console.log(resource_value);
        }

        /* check upgrading task */
        function checkTask() {
            $.post("http://localhost:5555/getStructingTask", function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                        task = JSON.parse(data);
                        console.log('resource up: '+JSON.stringify(task) );
                }
            })
        }

        /* update all Task */
        function updateTask() {
            var date = new Date();
            var currentsecconds = date.getTime() / 1000;
            //resource task
            for (var i = 0; i < task.length; i++) {
                    tasktime = task[i]["endtime"];
                    taskindex = task[i]["pos"];
                    console.log(taskindex);
                    var d = new Date(tasktime)
                    var seconds = (d.getTime() / 1000);
                
                //resource task
                if($.inArray(task[i]["type"],resourceAllTypes)!=-1){
                    if (currentsecconds < seconds) {
                        var remainingtime = parseInt(seconds - currentsecconds);
                        document.getElementById("resource" + (taskindex) + "-label").className = "level" + (resource[taskindex - 1]["level"]) + "-red";
//                        $("#resource" + (taskindex) + "-label").removeData("title");
                        $("#resource" + (taskindex) + "-label").tooltip("option", "content", resource[taskindex - 1]["type"] + " upgrading remain: " + remainingtime + " sec");
                        $('body').click(function () {
                            $("#resource" + (taskindex) + "-label").tooltip('close');
                        });
                    } else {
                        $("#resource" + (taskindex) + "-label").tooltip("option", "content", "Success!!");
                        setTimeout(setResource, 100);
                        setTimeout(delayFinishUpgradedResource, 1000);
                    }
                }
                
                //village task
                else{
                    if (currentsecconds < seconds) {
                        var remainingtime = parseInt(seconds - currentsecconds);
                        var indexbuilding = getIndexBuilding(taskindex);
                        document.getElementById("village" + (taskindex) + "-label").className = "level" + building[indexbuilding]["level"] + "-red";

                        $("#village" + (taskindex) + "-label").tooltip("option", "content","Time remaining: " + remainingtime + " sec");
                        $('body').click(function () {
                            $("#village" + (taskindex) + "-label").tooltip('close');
                        });
                    } 
                    else {
                        $("#village" + (taskindex) + "-label").tooltip("option", "content", "Success!!");
                        setTimeout(setVillage, 100);
                        setTimeout(delayFinishUpgradedVillage, 1000);
                }
                }
            }
            console.log("tasklengrth"+task.length)
            worker = fullworker - task.length;
            $(workernum).text(worker);

            
        }


        function delayFinishUpgradedResource() {
            $("#resource" + (taskindex) + "-label").tooltip('close');
            checkTask();
        }

        function delayFinishUpgradedVillage() {
            $("#village" + (taskindex) + "-label").tooltip('close');
            checkTask();
        }


        /*Village attribute*/
        var building = null;
        var index_village;
        var buildingAllTypes = ["villagehall", "granary", "warehouse", "market", "barracks", "academy", "stable", "headquarter", "smithy", "workshop"];
        var buildingCreateStatus = new Array;
        var upgradeBuildingStatus;
        var createBuildingCall = false;
        var villageUpgradeCall = false;
        var tasktime_village, taskindex_village;
        var villagelevel;

        var building_info = {
                "villagehall": {
                    cost: [[70, 40, 60, 20], [90, 50, 75, 25], [115, 65, 100, 35], [145, 85, 125, 40], [190, 105, 160, 55], [240, 135, 205, 70], [310, 175, 265, 90], [395, 225, 340, 115], [505, 290, 430, 145], [645, 370, 555, 185]]
                    , consumption: [2, 1, 1, 1, 1, 2, 2, 2, 2, 2]
                    , time: [{
                        hour: 0
                        , min: 06
                        , sec: 40
                    }, {
                        hour: 0
                        , min: 08
                        , sec: 44
                    }, {
                        hour: 0
                        , min: 11
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 13
                        , sec: 54
                    }, {
                        hour: 0
                        , min: 17
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 20
                        , sec: 52
                    }, {
                        hour: 0
                        , min: 25
                        , sec: 14
                    }, {
                        hour: 0
                        , min: 30
                        , sec: 16
                    }, {
                        hour: 0
                        , min: 36
                        , sec: 06
                    }, {
                        hour: 0
                        , min: 42
                        , sec: 52
                    }]
                    , info: "Building leaders live in the main building. The much higher level you can more upgrade or create village or resource at the same time."
                }
                , "market": {
                    cost: [[80, 70, 120, 70], [100, 90, 155, 90], [130, 115, 195, 115], [170, 145, 250, 145], [215, 190, 320, 190], [275, 240, 410, 240], [350, 310, 530, 310], [450, 395, 675, 395], [575, 505, 865, 505], [740, 645, 1105, 645]]
                    , consumption: [4, 2, 2, 2, 2, 3, 3, 3, 3, 3]
                    , time: [{
                        hour: 0
                        , min: 06
                        , sec: 00
                    }, {
                        hour: 0
                        , min: 07
                        , sec: 58
                    }, {
                        hour: 0
                        , min: 10
                        , sec: 14
                    }, {
                        hour: 0
                        , min: 12
                        , sec: 52
                    }, {
                        hour: 0
                        , min: 15
                        , sec: 56
                    }, {
                        hour: 0
                        , min: 19
                        , sec: 28
                    }, {
                        hour: 0
                        , min: 23
                        , sec: 36
                    }, {
                        hour: 0
                        , min: 28
                        , sec: 22
                    }, {
                        hour: 0
                        , min: 33
                        , sec: 54
                    }, {
                        hour: 0
                        , min: 40
                        , sec: 20
                    }]
                    , info: "The markets you can trade resources with other players have . Even higher You can transport more resources simultaneously ."
                }
                , "barracks": {
                    cost: [[210, 140, 260, 120], [270, 180, 335, 155], [345, 230, 425, 195], [440, 295, 545, 250], [565, 375, 700, 320], [720, 480, 895, 410], [925, 615, 1145, 530], [1180, 790, 1465, 675], [1515, 1010, 1875, 865], [1935, 1290, 2400, 1105]]
                    , consumption: [4, 2, 2, 2, 2, 3, 3, 3, 3, 3]
                    , time: [{
                        hour: 0
                        , min: 06
                        , sec: 40
                    }, {
                        hour: 0
                        , min: 08
                        , sec: 44
                    }, {
                        hour: 0
                        , min: 11
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 13
                        , sec: 54
                    }, {
                        hour: 0
                        , min: 17
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 20
                        , sec: 52
                    }, {
                        hour: 0
                        , min: 25
                        , sec: 14
                    }, {
                        hour: 0
                        , min: 30
                        , sec: 16
                    }, {
                        hour: 0
                        , min: 36
                        , sec: 06
                    }, {
                        hour: 0
                        , min: 42
                        , sec: 52
                    }]
                    , info: "A large military barracks allows you to build more troops at the same time . But resources are three times normal ."
                }
                , "academy": {
                    cost: [[220, 160, 90, 40], [280, 205, 115, 50], [360, 260, 145, 65], [460, 335, 190, 85], [590, 430, 240, 105], [755, 550, 310, 135], [970, 705, 395, 175], [1240, 900, 505, 225], [1585, 1155, 650, 290], [2030, 1475, 830, 370]]
                    , consumption: [4, 2, 2, 2, 2, 3, 3, 3, 3, 3]
                    , time: [{
                        hour: 0
                        , min: 06
                        , sec: 40
                    }, {
                        hour: 0
                        , min: 08
                        , sec: 44
                    }, {
                        hour: 0
                        , min: 11
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 13
                        , sec: 54
                    }, {
                        hour: 0
                        , min: 17
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 20
                        , sec: 52
                    }, {
                        hour: 0
                        , min: 25
                        , sec: 14
                    }, {
                        hour: 0
                        , min: 30
                        , sec: 16
                    }, {
                        hour: 0
                        , min: 36
                        , sec: 06
                    }, {
                        hour: 0
                        , min: 42
                        , sec: 52
                    }]
                    , info: "Education New Forces types being researched at this school. Add school level to study the forces that are even more effective . After research, the military unit that you want done . You can train soldiers in this village."
                }
                , "stable": {
                    cost: [[260, 140, 220, 100], [335, 180, 280, 130], [425, 230, 360, 165], [545, 295, 460, 210], [700, 375, 590, 270], [895, 480, 755, 345], [1145, 615, 970, 440], [1465, 790, 1240, 565], [1875, 1010, 1585, 720], [2400, 1290, 2030, 920]]
                    , consumption: [5, 3, 3, 3, 3, 3, 3, 3, 3, 3]
                    , time: [{
                        hour: 0
                        , min: 07
                        , sec: 20
                    }, {
                        hour: 0
                        , min: 09
                        , sec: 30
                    }, {
                        hour: 0
                        , min: 12
                        , sec: 02
                    }, {
                        hour: 0
                        , min: 14
                        , sec: 58
                    }, {
                        hour: 0
                        , min: 18
                        , sec: 20
                    }, {
                        hour: 0
                        , min: 22
                        , sec: 16
                    }, {
                        hour: 0
                        , min: 26
                        , sec: 50
                    }, {
                        hour: 0
                        , min: 32
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 38
                        , sec: 16
                    }, {
                        hour: 0
                        , min: 45
                        , sec: 24
                    }]
                    , info: "The great horse stables allows you to build large military units simultaneously . The cost is three times the normal price."
                }
                , "headquarter": {
                    cost: [[700, 670, 700, 240], [930, 890, 930, 320], [1240, 1185, 1240, 425], [1645, 1575, 1645, 565], [2190, 2095, 2190, 750], [2915, 2790, 2915, 1000], [3875, 3710, 3875, 1330], [5155, 4930, 5155, 1765], [6855, 6560, 6855, 2350], [9115, 8725, 9115, 3125]]
                    , consumption: [2, 1, 1, 1, 1, 2, 2, 2, 2, 2]
                    , time: [{
                        hour: 0
                        , min: 07
                        , sec: 40
                    }, {
                        hour: 0
                        , min: 08
                        , sec: 54
                    }, {
                        hour: 0
                        , min: 10
                        , sec: 18
                    }, {
                        hour: 0
                        , min: 11
                        , sec: 58
                    }, {
                        hour: 0
                        , min: 13
                        , sec: 52
                    }, {
                        hour: 0
                        , min: 16
                        , sec: 06
                    }, {
                        hour: 0
                        , min: 18
                        , sec: 40
                    }, {
                        hour: 0
                        , min: 21
                        , sec: 40
                    }, {
                        hour: 0
                        , min: 25
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 29
                        , sec: 10
                    }]
                    , info: "The mansion you can train a hero and occupied the area around the oasis when you raise the level to 10 level will affect the rate of production resources raised ."
                }
                , "workshop": {
                    cost: [[460, 510, 600, 320], [590, 655, 770, 410], [755, 835, 985, 525], [965, 1070, 1260, 670], [1235, 1370, 1610, 860], [1580, 1750, 2060, 1100], [2025, 2245, 2640, 1405], [2590, 2870, 3380, 1800], [3315, 3675, 4325, 2305], [4245, 4705, 5535, 2950]]
                    , consumption: [3, 2, 2, 2, 2, 2, 2, 2, 2, 2]
                    , time: [{
                        hour: 0
                        , min: 10
                        , sec: 00
                    }, {
                        hour: 0
                        , min: 12
                        , sec: 36
                    }, {
                        hour: 0
                        , min: 15
                        , sec: 36
                    }, {
                        hour: 0
                        , min: 19
                        , sec: 06
                    }, {
                        hour: 0
                        , min: 23
                        , sec: 10
                    }, {
                        hour: 0
                        , min: 27
                        , sec: 52
                    }, {
                        hour: 0
                        , min: 33
                        , sec: 20
                    }, {
                        hour: 0
                        , min: 39
                        , sec: 40
                    }, {
                        hour: 0
                        , min: 47
                        , sec: 02
                    }, {
                        hour: 0
                        , min: 55
                        , sec: 32
                    }]
                    , info: "Workshop Siege engines like catapults and rams can be built in the workshop. The higher level of engine It will only produce faster ."
                }
                , "smithy": {
                    cost: [[180, 250, 500, 160], [230, 320, 640, 205], [295, 410, 820, 260], [375, 525, 1050, 335], [485, 670, 1340, 430], [620, 860, 1720, 550], [790, 1100, 2200, 705], [1015, 1405, 2815, 900], [1295, 1800, 3605, 1155], [1660, 2305, 4610, 1475]]
                    , consumption: [4, 2, 2, 2, 2, 3, 3, 3, 3, 3]
                    , time: [{
                        hour: 0
                        , min: 06
                        , sec: 40
                    }, {
                        hour: 0
                        , min: 08
                        , sec: 44
                    }, {
                        hour: 0
                        , min: 11
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 13
                        , sec: 54
                    }, {
                        hour: 0
                        , min: 17
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 20
                        , sec: 52
                    }, {
                        hour: 0
                        , min: 25
                        , sec: 14
                    }, {
                        hour: 0
                        , min: 30
                        , sec: 16
                    }, {
                        hour: 0
                        , min: 36
                        , sec: 06
                    }, {
                        hour: 0
                        , min: 42
                        , sec: 52
                    }]
                    , info: "Forge weapons and armor of warriors, were developed in the furnace of the forge . You can invent better weapons and armor by increasing the level of the smithy."
                }
                , "granary": {
                    cost: [[80, 100, 70, 20], [100, 130, 90, 25], [130, 165, 115, 35], [170, 210, 145, 40], [215, 270, 190, 55], [275, 345, 240, 70], [350, 440, 310, 90], [450, 565, 395, 115], [575, 720, 505, 145], [740, 920, 645, 185]]
                    , consumption: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
                    , time: [{
                        hour: 0
                        , min: 05
                        , sec: 20
                    }, {
                        hour: 0
                        , min: 07
                        , sec: 12
                    }, {
                        hour: 0
                        , min: 09
                        , sec: 20
                    }, {
                        hour: 0
                        , min: 11
                        , sec: 50
                    }, {
                        hour: 0
                        , min: 14
                        , sec: 44
                    }, {
                        hour: 0
                        , min: 18
                        , sec: 04
                    }, {
                        hour: 0
                        , min: 21
                        , sec: 58
                    }, {
                        hour: 0
                        , min: 26
                        , sec: 30
                    }, {
                        hour: 0
                        , min: 31
                        , sec: 44
                    }, {
                        hour: 0
                        , min: 37
                        , sec: 48
                    }]
                    , info: "Crop produced on your farm are kept here . The barn , which has more than three times as many resources to help you keep safe."
                }
                , "warehouse": {
                    cost: [[130, 160, 90, 40], [165, 205, 115, 50], [215, 260, 145, 65], [275, 335, 190, 85], [350, 430, 240, 105], [445, 550, 310, 135], [570, 705, 395, 175], [730, 900, 505, 225], [935, 1155, 650, 290], [1200, 1475, 830, 370]]
                    , consumption: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
                    , time: [{
                        hour: 0
                        , min: 06
                        , sec: 40
                    }, {
                        hour: 0
                        , min: 08
                        , sec: 44
                    }, {
                        hour: 0
                        , min: 11
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 13
                        , sec: 54
                    }, {
                        hour: 0
                        , min: 17
                        , sec: 08
                    }, {
                        hour: 0
                        , min: 20
                        , sec: 52
                    }, {
                        hour: 0
                        , min: 25
                        , sec: 14
                    }, {
                        hour: 0
                        , min: 30
                        , sec: 16
                    }, {
                        hour: 0
                        , min: 36
                        , sec: 06
                    }, {
                        hour: 0
                        , min: 42
                        , sec: 52
                    }]
                    , info: "Resources wood, clay and iron are stored in this warehouse . Warehouse , which has more than three times as many resources to help you keep safe ."
                }
            }
            /* Village function */

        function villageClick() {
            init();
            $('#village_container').show();
            setVillage();
        }

        function setVillage() {
            $.post("http://localhost:5555/loadbuilding", function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    building = JSON.parse(data);
                    console.log(JSON.stringify(building));
                }
            })
            setTimeout(generateVillage, 500);
        }

        function generateVillage() {
            var buildingposlists = new Array;
            for (var i = 0; i < building.length; i++) {
                document.getElementById ("village" + building[i]["pos"] + "-label").className = ("village-level"+" "+"level" + building[i]["level"]);
                buildingposlists[i] = building[i]["pos"];
                document.getElementById("village" + (building[i]["pos"])).className = building[i]["type"];
                buildingposlists[i] = building[i]["pos"];
                $("#village" + (i + 1) + "-label").prop('title', building[i]["type"]);
            }
            for (var i = 0; i < 14; i++) {
                if ($.inArray(i + 1, buildingposlists) == -1) {
                    document.getElementById("village" + (i + 1) + "-label").className = ("village-level"+" "+"level" + 0);
                    $("#village" + (i + 1) + "-label").prop('title', "Empty Area");
                }
            }
        }

        function upgradeVillage(e) {
            index_village = parseInt($(this).attr("index"));
            villagelevel = $("#village" + (index_village + 1) + "-label").attr('class').split(' ')[1];
            if (villagelevel == 'level0') {
                createNewVillage();
                console.log("create");
            } else {
                upgradeVillageLevel();
                console.log("upgrade");
            }

        }

        function createNewVillage() {
            $('#create-villageModal').modal("show");

            //check building 1
            $.post("http://localhost:5555/canCreateBuilding", {
                pos: (index_village + 1)
                , type: buildingAllTypes[0]
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    buildingCreateStatus[0] = data;
                }
            })


            //check building 2
            $.post("http://localhost:5555/canCreateBuilding", {
                pos: (index_village + 1)
                , type: buildingAllTypes[1]
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    buildingCreateStatus[1] = data;
                }
            })

            //check building 3
            $.post("http://localhost:5555/canCreateBuilding", {
                pos: (index_village + 1)
                , type: buildingAllTypes[2]
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    buildingCreateStatus[2] = data;
                }
            })

            //check building 4
            $.post("http://localhost:5555/canCreateBuilding", {
                pos: (index_village + 1)
                , type: buildingAllTypes[3]
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    buildingCreateStatus[3] = data;
                }
            })

            //check building 5
            $.post("http://localhost:5555/canCreateBuilding", {
                pos: (index_village + 1)
                , type: buildingAllTypes[4]
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    buildingCreateStatus[4] = data;
                }
            })

            //check building 6
            $.post("http://localhost:5555/canCreateBuilding", {
                pos: (index_village + 1)
                , type: buildingAllTypes[5]
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    buildingCreateStatus[5] = data;
                }
            })

            //check building 7
            $.post("http://localhost:5555/canCreateBuilding", {
                pos: (index_village + 1)
                , type: buildingAllTypes[6]
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    buildingCreateStatus[6] = data;
                }
            })

            //check building 8
            $.post("http://localhost:5555/canCreateBuilding", {
                pos: (index_village + 1)
                , type: buildingAllTypes[7]
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    buildingCreateStatus[7] = data;
                }
            })

            //check building 9
            $.post("http://localhost:5555/canCreateBuilding", {
                pos: (index_village + 1)
                , type: buildingAllTypes[8]
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    buildingCreateStatus[8] = data;
                }
            })

            //check building 10
            $.post("http://localhost:5555/canCreateBuilding", {
                pos: (index_village + 1)
                , type: buildingAllTypes[9]
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    console.log(data);
                    buildingCreateStatus[9] = data;
                }
            })

            setTimeout(buildingCheckCreate, 600);
        }

        function buildingCheckCreate() {

            console.log('kkk');
            console.log(buildingCreateStatus);

            for (var i = 0; i < buildingAllTypes.length; i++) {
                if (buildingCreateStatus[i] == 'true') {
                    console.log('can upgrade');
                    $('#' + buildingAllTypes[i] + '-create').prop("disabled", false);
                    createBuildingCall = true;
                    $('.buildingcreate').click(buildingCreate);
                } else {
                    console.log('can not upgrade');
                    $('#' + buildingAllTypes[i] + '-create').prop("disabled", true);
                }
            }

        }

        function buildingCreate(e) {
            if (createBuildingCall) {
                var buildingtype = $(this).attr("value");
                console.log(buildingtype + " is creating pos: " + (index_village + 1));
                villagelevel = 0;
                console.log('create law na kub' + buildingtype + ' pos:' + (index_village + 1));
                $.post("http://localhost:5555/createBuilding", {
                    pos: (index_village + 1)
                    , type: buildingtype
                }, function (data) {
                    if (data == "Something wrong on our server :( Try Again~") {
                        $("#modal-header-title").text('Error !');
                        //Update and Show modal if error is occur
                        $("#modal-body").text(data);
                        $("#errorModel").modal("show");
                    }
                })
                setTimeout(checkTask,100);
                setTimeout(setVillage,100);
                createBuildingCall = false;
            }
        }
        
        function getIndexBuilding(pos){
            for (var i = 0; i < building.length; i++) {
                if (building[i]["pos"] == pos) {
                    return index_building = i;
                }
            }
            return 0;
        }

        function upgradeVillageLevel() {
            //$('#upgrade-villageModal').modal("show");
            
            var index_building = getIndexBuilding(index_village + 1);
            var upgradeType = building[index_building]["type"];
            villagelevel = building[index_building]["level"];
            villageUpgradeModal(upgradeType, villagelevel);
            $('#upgrade-village').modal("show");


            $.post("http://localhost:5555/canUpgradeBuilding", {
                pos: (index_village + 1)
            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    upgradeBuildingStatus = data;
                }
            })
            setTimeout(upgradeVillageDelay, 100);
        }

        function upgradeVillageDelay() {
            console.log(upgradeBuildingStatus);
            if (upgradeBuildingStatus == 'true') {
                console.log('Village can upgrade');
                $('#upgradebtn-village').prop("disabled", false);
                villageUpgradeCall = true;
                $('#upgradebtn-village').click(upgradeBuildingLevel);
            } else {
                console.log('Village can not upgrade');
                $('#upgradebtn-village').prop("disabled", true);
            }
        }

        function upgradeBuildingLevel() {
            console.log('buiding will be upgrade');
            if (villageUpgradeCall) {
                console.log('upgrade Village law na kub' + (index_village + 1))
                $.post("http://localhost:5555/upgradeBuilding", {
                    pos: (index_village + 1)
                }, function (data) {
                    if (data == "Something wrong on our server :( Try Again~") {
                        $("#modal-header-title").text('Error !');
                        //Update and Show modal if error is occur
                        $("#modal-body").text(data);
                        $("#errorModel").modal("show");
                    }
                })
                setTimeout(villageClick, 100);
                setTimeout(checkTask,100);
                villageUpgradeCall = false;
            }
        }

        //villageUpgradeModal
        function villageUpgradeModal(upgradeType, villagelevel) {
            console.log("injection");
            var inject = "";
            inject += "<div class=\"modal fade\" id=\"upgrade-village\" role=\"dialog\">";
            inject += "<div class=\"modal-dialog\">";
            inject += "<div class=\"modal-content\">";
            inject += "<div class=\"modal-header\">";
            inject += "<button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>";
            inject += "<h3 class=\"modal-title\">" + upgradeType.charAt(0).toUpperCase() + upgradeType.slice(1) + " Level " + villagelevel + " <span id=\"level-village\"></span></h3>";
            inject += "</div>";
            inject += "<div class=\"modal-body\">";
            inject += building_info[upgradeType].info + "</p>";
            inject += "<div class=\"" + upgradeType + "-upgrademodel\"></div>";
            inject += "Requirment</p>";
            inject += "Wood : <span id=\"setWood-village\">" + building_info[upgradeType].cost[villagelevel][0] + "</span> ";
            inject += "Clay : <span id=\"setClay-village\">" + building_info[upgradeType].cost[villagelevel][1] + "</span> ";
            inject += "Iron : <span id=\"setIron-village\">" + building_info[upgradeType].cost[villagelevel][2] + "</span> ";
            inject += "Crop : <span id=\"setCrop-village\">" + building_info[upgradeType].cost[villagelevel][3] + "</span></p>";
            var upgradeTime = twoDigits(building_info[upgradeType].time[villagelevel].hour) + ":" + twoDigits(building_info[upgradeType].time[villagelevel].min) + ":" + twoDigits(building_info[upgradeType].time[villagelevel].sec);
            inject += "Upgrade time : <span id=\"upgrade-time-village\">" + upgradeTime + "</span> ";
            inject += "<button id=\"upgradebtn-village\" type=\"button\" class=\"btn btn-default\"";
            inject += "data-dismiss=\"modal\" value=\"\">Upgrade</button>";
            inject += "</div></div></div></div>";

            $("#upgrade-village").replaceWith(inject);

        }



        /* Other function */

        /** Function to format to two digit**/
        function twoDigits(d) {
            if (0 <= d && d < 10) return "0" + d.toString();
            if (-10 < d && d < 0) return "-0" + (-1 * d).toString();
            return d.toString();
        }

        function mapShow() {
            //$("#village" + building[i]["pos"] + "-label").addClass("level" + building[i]["level"]);
            $.post("http://localhost:5555/getMap", {

            }, function (data) {
                if (data == "Something wrong on our server :( Try Again~") {
                    $("#modal-header-title").text('Error !');
                    //Update and Show modal if error is occur
                    $("#modal-body").text(data);
                    $("#errorModel").modal("show");
                } else {
                    map = JSON.parse(data);
                    console.log(JSON.stringify(data));
                    //console.log(map[0]["x"]);
                    for (var i = 0; i < map.length; i++) {
                        console.log(map[i]["type"]);
                        $("#map-box" + i).addClass("map-" + map[i]["type"]);
                    }

                }
            })

        }

        function mapClick() {
            init();
            $('#map_container').show();
            mapShow();
        }

        function reportClick() {
            init();
            $('#report_container').show();
        }

        function mailClick() {
            init();
            $('#mail_container').show();
        }

        function statisticClick() {
            init();
            $('#statistic_container').show();
        }

        function account() {
            $('#button-account').modal("show");
            //TODO remove user from server
        }

        function setting() {
            $('#button-setting').modal("show");
            //TODO remove user from server
        }

        function logout() {
            location.assign("http:/Client/indexEx.html");
            //TODO remove user from server
        }

        /* Initial */
        init();
        resourceClick();

        /*Menu Listener*/
        $('#resource_menu').click(resourceClick);
        $('#village_menu').click(villageClick);
        $('#map_menu').click(mapClick);
        $('#report_menu').click(reportClick);
        $('#mail_menu').click(mailClick);
        $('#statistic_menu').click(statisticClick);

        /*Navbar Listener*/
        $('#account-btn').click(account);
        $('#setting-btn').click(setting);
        $('#logout-btn').click(logout);

        /*Resource Listner*/
        $('.resource-level').click(upgradeResource);
        $('.resource-level').tooltip();

        /*Village Listener*/
        $('.village-level').click(upgradeVillage);
        $('.village-level').tooltip();
        /*Stockbar*/
        setInterval(updateResource, 100);
        setInterval(updateTask, 1000);
    </script>


</body>

</html>